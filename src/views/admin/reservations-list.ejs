<%- include('../general/header') %>
 <%- include ('../general/navbar') %>
<body style="margin-bottom: 50px;">
   
  <main>
  
  <div class="container">
    <h2 class="text-center">Listado de reservas</h2>
    <br />
      <table class="table table-hover" id="lista-turnos">
        <thead>
          <tr class="encabezado">
            <th scope="col">Turno</th>
            <th scope="col">Fecha</th>
            <th scope="col">Tipo de puesto</th>
            <th scope="col">Nombre de usuario</th>
            <th scope="col">Legajo</th>
            <th scope="col">Puesto</th>
            <th scope="col">Piso</th> 
      
      <tr class="overflow">
      <% for(var i=0; i<rows.length; i++) {%>
        <%var tipo = rows[i].escritorio_id, id = rows[i].usuario_id, tpuesto = "";const f = rows[i].fecha; var options = { year: 'numeric', month: 'long', day: 'numeric' };%>
          <%switch(rows[i].tipo) {case 1:tpuesto = "Escritorio individual";break;case 2:tpuesto = "Mesa grupal";break;case 3:tpuesto = "Sala de reuniones";break;} %>
        </tr>
          <% function buscar(usuario) {return usuario.id_usuario === id} %> 
          <% let newRowU = rowsU.find(usuario => buscar(usuario)) %>
          <% console.log(newRowU) %> 
          <% const nuevaf = f.toLocaleDateString("es-ES", options);%>
          <td style="min-width: 70px;" scope="col"><%= rows[i].id_turno %></td>
          <td style="min-width: 200px;" scope="col"><%= nuevaf %></td>
          <td style="min-width: 170px;" scope="col"><%= tpuesto %></td>
          <td style="min-width: 170px;" scope="col"><%= newRowU.nombre %></td>
          <td style="min-width: 100px;" scope="col"><%= newRowU.legajo %></td>
          <td style="min-width: 70px;" scope="col"><%= rows[i].escritorio_id %></td>
          <td style="min-width: 70px;" scope="col"><%= rows[i].piso %></td>          
          </tr>
      <% } %>
        </thead>
        <tbody>
        </tbody>
      </table>
  </div>

</main>
<%- include('../general/footer') %>

</body>    
</html>
